# Баг-репорты

## Результаты тестирования

**Дата тестирования:** [укажите сегодняшнюю дату]  
**Версия API:** https://qa-internship.avito.com  
**Количество тестов:** 10  
**Пройдено:** 2 ❌  
**Не пройдено:** 8 ✅

## Обнаруженные баги

### BUG-001: Некорректное создание объявления

**ID:** BUG-001  
**Приоритет:** High  
**Серьезность:** Critical  
**Статус:** Open  

**Описание:**  
Не удается создать объявление через POST /api/items. Тест `test_create_item_positive` падает, что указывает на проблемы с базовым функционалом создания объявлений.

**Шаги для воспроизведения:**  
1. Отправить POST запрос на /api/items с валидными данными
2. Проверить ответ

**Ожидаемый результат:**  
- Status code: 200
- Объявление успешно создается

**Фактический результат:**  
- Status code: не 200 (возможно 400, 500 или другой код ошибки)

**Затронутые тест-кейсы:**  
- TC-001: Успешное создание объявления ❌

---

### BUG-002: Невозможность получения созданного объявления

**ID:** BUG-002  
**Приоритет:** High  
**Серьезность:** Critical  
**Статус:** Open  

**Описание:**  
После создания объявления невозможно получить его по ID. Тест `test_get_item_by_id_positive` падает.

**Шаги для воспроизведения:**  
1. Создать объявление
2. Попытаться получить его по ID через GET /api/items/{id}

**Ожидаемый результат:**  
- Status code: 200
- Возвращаются данные созданного объявления

**Фактический результат:**  
- Status code: не 200 или данные не соответствуют ожидаемым

**Затронутые тест-кейсы:**  
- TC-002: Получение объявления по существующему ID ❌

---

### BUG-003: Проблемы с получением объявлений по sellerId

**ID:** BUG-003  
**Приоритет:** High  
**Серьезность:** Major  
**Статус:** Open  

**Описание:**  
Не работает фильтрация объявлений по sellerId. Тесты `test_get_items_by_seller_id_positive` и `test_get_items_by_seller_id_negative` падают.

**Шаги для воспроизведения:**  
1. Создать несколько объявлений с одинаковым sellerId
2. Отправить GET запрос на /api/items?sellerId={id}

**Ожидаемый результат:**  
- Status code: 200
- Возвращаются все объявления указанного продавца

**Фактический результат:**  
- Status code: не 200 или возвращаются неверные данные

**Затронутые тест-кейсы:**  
- TC-003: Получение всех объявлений по sellerId ❌
- TC-007: Получение объявлений по несуществующему sellerId ❌

---

### BUG-004: Неработающая статистика объявлений

**ID:** BUG-004  
**Приоритет:** Medium  
**Серьезность:** Major  
**Статус:** Open  

**Описание:**  
Не работает получение статистики по объявлениям. Тест `test_get_item_stats_positive` падает.

**Шаги для воспроизведения:**  
1. Создать объявление
2. Запросить статистику через GET /api/items/{id}/stats

**Ожидаемый результат:**  
- Status code: 200
- Возвращается статистика с полями views, clicks

**Фактический результат:**  
- Status code: не 200 или отсутствуют ожидаемые поля

**Затронутые тест-кейсы:**  
- TC-004: Получение статистики по существующему itemId ❌

---

### BUG-005: Проблемы с валидацией данных

**ID:** BUG-005  
**Приоритет:** Medium  
**Серьезность:** Major  
**Статус:** Open  

**Описание:**  
Некорректная обработка невалидных данных при создании объявлений. Тесты валидации падают.

**Шаги для воспроизведения:**  
1. Отправить POST запрос с отсутствующими обязательными полями
2. Отправить POST запрос с отрицательной ценой
3. Отправить POST запрос с boundary значениями

**Ожидаемый результат:**  
- Для невалидных данных: status code 400/422
- Для boundary значений: корректная обработка (200 или 400)

**Фактический результат:**  
- Неправильные коды ответов или отсутствие валидации

**Затронутые тест-кейсы:**  
- TC-005: Создание объявления с невалидными данными ❌
- TC-009: Создание объявления с отрицательной ценой ❌
- TC-010: Создание объявления с boundary значениями ❌

---

## Работающие функциональности

### ✅ Успешно пройденные тесты:

- **TC-006**: Получение объявления по несуществующему ID ✅
  - Сервер корректно возвращает 404 для несуществующих объявлений

- **TC-008**: Получение статистики по несуществующему itemId ✅
  - Сервер корректно возвращает 404 для статистики несуществующих объявлений

## Общий вывод

**Критичность ситуации:** ВЫСОКАЯ  
Из 4 основных endpoint'ов микросервиса полностью нерабочими являются:
- Создание объявлений (POST /api/items)
- Получение объявлений по ID (GET /api/items/{id})  
- Получение объявлений по sellerId (GET /api/items?sellerId={id})
- Получение статистики (GET /api/items/{id}/stats)

Рабочими остались только обработки ошибок для несуществующих ресурсов.

**Рекомендации:**  
1. Срочно исправить базовый функционал создания объявлений
2. Восстановить работу получения объявлений
3. Настроить корректную валидацию входных данных